# Item DAO

A simple DAO for managing 'items'. Items consist of a name and some
contents. One might use items to store pages on a website or
dictionary definitions for a conlang group.

Item DAO implements the [base CW20
spec](https://github.com/cosmwasm/cw-plus/tree/HEAD/packages/cw20#base)
providing a token called `IDAO` which is used for voting.

A schema which provides information about the format of messages that
can be sent to Item DAO can be generated by running `cargo schema` and
browsing `schmea/`.

## Functionality

- Create proposals to add/remove items and to change proposal cost and
  quorum parameters for the DAO.
- Vote on outstanding proposals. On a successful vote Item DAO
  executes whatever action is associated with the proposal.
- Withdraw votes for an outstanding proposal.
- Send, transfer, and burn voting tokens.
- Query the DAO to see items that have been voted in and introspect
  about its current state.

## Design

Item DAO was [initially
designed](https://github.com/ezekiiel/item-dao/commit/53b3b7c086dbae03bf20eee68c0f2cdeab85cd83)
as two contracts: a CW20 token and a DAO which used that token for
voting. After some consideration I opted to implement the CW20
interface inside of the DAO. Doing so meant that there was no longer a
need to pay gas fees for the return of tokens to voters after the
completion of a proposal.

Item DAO has two parameters: `quorum` and `proposal_cost`. The quorum
that is set determines how many tokens must be staked to a vote before
that vote can pass. The proposal cost determines how many tokens must
be staked to create a proposal. Upon the completion of a vote all
staked tokens are returned.

## Architecture

- `src/message.rs` contains the types that Item DAO uses to send and
  receive messages as well as the test suite.
- `src/contract.rs` contains the central logic for the DAO.
- `src/actions.rs` contains logic related to processing new proposals
  ,votes, and withdrawals.
- `src/tokens.rs` contains logic related to the implementation of the
  CW20 interface.

## Addresses

Item DAO is deployed on the uni testnet. The most recent version which
completes the DAO is not yet published as I am out of `ujunox` until
the faucet comes back online.

**token program:**
Initial mint of 100,000 tokens. Unmodified cw20-base contract. This is
DAO prehistory from when the DAO was two contracts.

- address: `juno1slz6c85kxp4ek5ufmcakfhnscv9r2snlemxgwz6cjhklgh7v2hmsnwzy2k`
- code_id: `23`

**dao program `v0.1`**
Does nothing. Just tests that I understand how passing arguments into
queries and executions work.

- code_id: `28`
- address: `juno14q5elxj4ghktt7d7d0uw0cs0gqyeay25h5fkree897gjm38gevxqexk8fn`

**dao program `v0.2`**
Allows creation of proposals and voting on those proposals. All coins
sent to contract are burned. Features a bug where enums were not
converted to snake case during serialization.

- code_id: `59`
- address: `juno1cxnmukp9tjxksduey6wkgqmwzuvhvqqcwqq54pfh45xt7ze9kmjsjhng0u`

**dao program `v0.3`**
Same as v0.2 but with the snake case bug fixed.

- code_id: `60`
- address: `juno10wmp4czgnww9tvwg7xu239k88vx4ksyqwah245nsaj7lz6r9v6uqdepwc2`

**dao program `v0.4`**
The DAO now implements the cw20 interface.

- code_id: `71`
- address: `juno1aj4khuq9descgr3r9ejs2t7gdqa83f3ufl8s8gwfeza8mgl238zsj5fzpv`

**dao program `v0.5`**
Deployment pending. Implements all of the functionality described in
`src/msg.rs`.

## Example commands

Example execute message to create a new proposal:

```
'{"propose":{"title":"all twitter profile photos should be ðŸ¦„s!","body":"by making all of our twitter profile photos ðŸ¦„ emojis it will be clear that we are part of a top secret club.","action":{"add_item":{"name":"ðŸ¦„ twitter profile photos required","contents":"all twitter profiles shall be ðŸ¦„s"}}}}'
```

Example query to view a proposal

```
junod query wasm contract-state smart juno10wmp4czgnww9tvwg7xu239k88vx4ksyqwah245nsaj7lz6r9v6uqdepwc2 '{"get_proposal":{"proposal_id": 0}}'
```
